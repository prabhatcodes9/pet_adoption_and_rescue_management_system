<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lost Pets - Admin</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin_lost.css') }}">
</head>
<body>
<div class="container">
    <header class="dashboard-header">
        <div>
            <h1>Found Pets Management</h1>
            <p>View and manage all found pet reports</p>
        </div>
        <a href="{{ url_for('admin_dashboard') }}" class="back-btn">‚Üê Back to Dashboard</a>
    </header>

    <!-- Status Cards -->
    <div class="status-cards">
        <div class="status-card" onclick="showSection('pending')">
            <h3>Pending</h3>
            <span>{{ pending_count }}</span>
        </div>
        <div class="status-card" onclick="showSection('approved')">
            <h3>Approved</h3>
            <span>{{ approved_count }}</span>
        </div>
        <div class="status-card" onclick="showSection('rejected')">
            <h3>Rejected</h3>
            <span>{{ rejected_count }}</span>
        </div>
    </div>

    <div class="pet-sections-container">
        <!-- Pending Section -->
        <div id="pending" class="pet-grid fade show">
            {% if pending_pets %}
                {% for pet in pending_pets %}
                <div class="pet-card">
                    <img src="{{ url_for('static', filename='uploads/' + pet.image) }}" alt="{{ pet.pet_name }}">
                    <h3>{{ pet.pet_name }}</h3>
                    <p><strong>Type:</strong> {{ pet.pet_type }}</p>
                    <p><strong>Breed:</strong> {{ pet.breed or 'N/A' }}</p>
                    <p><strong>Description:</strong> {{ pet.description or 'N/A' }}</p>
                    <p><strong>Found Location:</strong> {{ pet.found_location or 'N/A' }}</p>
                    <p><strong>Contact:</strong> {{ pet.mobile or 'N/A' }}</p>
                    <p><strong>Date Found:</strong> {{ pet.date_found.strftime('%Y-%m-%d') }}</p>
                    <p><strong>Status:</strong> <span class="status-badge pending">Pending</span></p>
                    <div class="pet-actions">
                        <a href="{{ url_for('update_found_status', pet_id=pet.id, action='approve') }}" class="approve-btn">‚úÖ Approve</a>
                        <a href="{{ url_for('update_found_status', pet_id=pet.id, action='reject') }}" class="reject-btn">‚ùå Reject</a>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <p>No pending pets.</p>
            {% endif %}
        </div>

        <!-- Approved Section -->
        <div id="approved" class="pet-grid fade">
            {% if approved_pets %}
                {% for pet in approved_pets %}
                <div class="pet-card">
                    <img src="{{ url_for('static', filename='uploads/' + pet.image) }}" alt="{{ pet.pet_name }}">
                    <h3>{{ pet.pet_name }}</h3>
                    <p><strong>Type:</strong> {{ pet.pet_type }}</p>
                    <p><strong>Breed:</strong> {{ pet.breed or 'N/A' }}</p>
                    <p><strong>Description:</strong> {{ pet.description or 'N/A' }}</p>
                    <p><strong>Found Location:</strong> {{ pet.found_location or 'N/A' }}</p>
                    <p><strong>Contact:</strong> {{ pet.mobile or 'N/A' }}</p>
                    <p><strong>Date Found:</strong> {{ pet.date_found.strftime('%Y-%m-%d') }}</p>
                    <p><strong>Status:</strong> <span class="status-badge approved">Approved</span></p>
                    <div class="pet-actions">
                        <a href="{{ url_for('edit_pet', pet_id=pet.id) }}" class="edit-btn">‚úèÔ∏è Edit</a>
                        <form action="{{ url_for('delete_pet', pet_id=pet.id) }}" method="POST" onsubmit="return confirm('Delete this pet?');">
                            <button type="submit" class="delete-btn">üóëÔ∏è Delete</button>
                        </form>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <p>No approved pets.</p>
            {% endif %}
        </div>

        <!-- Rejected Section -->
        <div id="rejected" class="pet-grid fade">
            {% if rejected_pets %}
                {% for pet in rejected_pets %}
                <div class="pet-card">
                    <img src="{{ url_for('static', filename='uploads/' + pet.image) }}" alt="{{ pet.pet_name }}">
                    <h3>{{ pet.pet_name }}</h3>
                    <p><strong>Type:</strong> {{ pet.pet_type }}</p>
                    <p><strong>Breed:</strong> {{ pet.breed or 'N/A' }}</p>
                    <p><strong>Description:</strong> {{ pet.description or 'N/A' }}</p>
                    <p><strong>Found Location:</strong> {{ pet.found_location or 'N/A' }}</p>
                    <p><strong>Contact:</strong> {{ pet.mobile or 'N/A' }}</p>
                    <p><strong>Date Found:</strong> {{ pet.date_found.strftime('%Y-%m-%d') }}</p>
                    <p><strong>Status:</strong> <span class="status-badge rejected">Rejected</span></p>
                    <div class="pet-actions">
                        <a href="{{ url_for('edit_pet', pet_id=pet.id) }}" class="edit-btn">‚úèÔ∏è Edit</a>
                        <form action="{{ url_for('delete_pet', pet_id=pet.id) }}" method="POST" onsubmit="return confirm('Delete this pet?');">
                            <button type="submit" class="delete-btn">üóëÔ∏è Delete</button>
                        </form>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <p>No rejected pets.</p>
            {% endif %}
        </div>
    </div>
</div>

<script>
function showSection(sectionId) {
    const sections = document.querySelectorAll('.pet-grid');
    sections.forEach(s => s.classList.remove('show')); // fade out
    const target = document.getElementById(sectionId);
    target.classList.add('show'); // fade in
}

// Default load = pending
document.addEventListener('DOMContentLoaded', () => showSection('pending'));
</script>
</body>
</html>
